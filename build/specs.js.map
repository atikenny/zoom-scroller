{"version":3,"sources":["webpack:///specs.js","webpack:///webpack/bootstrap 284212e38c870e12b16c","webpack:///./lib/body-inliner.js","webpack:///./lib/canvas-helpers.js","webpack:///./lib/dom-helpers.js","webpack:///./lib/body-inliner.test.js","webpack:///./lib/canvas-helpers.test.js","webpack:///./lib/dom-helpers.test.js","webpack:///./specs.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","bodyInlinerFactory","inlineElementStyles","getElementClone","cache","appendClone","parentClone","parentElement","style","display","appendChild","replaceBodyWithDiv","outerHTML","replace","getHTML","convertNodeListToArray","window","fullPageHTML","remove","addHTMLToSvg","inlinedHTML","svgContainer","getSvgUrl","domUrl","getBlob","svg","type","createObjectURL","getCachedSvgUrl","URL","webkitURL","cachedValue","svgUrl","drawSvgToCanvas","drawSvgToCanvasAsync","drawWhereYouAtWindow","clearCanvas","canvas","context","getContext","clearRect","width","height","image","callback","onload","drawImage","onerror","Error","src","Promise","bind","rectStartY","scrollTop","rectWidth","clientWidth","rectHeight","clientHeight","globalCompositeOperation","fillStyle","fillRect","addStyleToElement","appendElement","fadeInElement","element","styles","keys","forEach","propertyName","document","tagName","elementStyles","childElement","createElement","visibility","opacity","visualStyleProperties","notVisualTags","isNotVisualTag","indexOf","toLowerCase","computedStyle","getComputedStyle","elementVisualStyleProperties","map","propertyValue","getPropertyValue","cssText","join","children","isDeepClone","cloneNode","__WEBPACK_IMPORTED_MODULE_0__body_inliner__","describe","mockParentElement","jasmine","createSpyObj","mockWindow","mockGetBlob","createSpy","mockInlineElementStyle","mockGetElementClone","mockObjectUrl","mockConvertNodeListToArray","and","returnValue","callFake","initSUT","fillSvgContainer","content","callMethod","it","expect","toEqual","any","Function","toHaveBeenCalledWith","__WEBPACK_IMPORTED_MODULE_0__canvas_helpers__","mockCanvas","mockCanvasWidth","mockCanvasHeight","mockContext","mockImage","mockCachedSvgUrl","mockGetCachedSvgUrl","mockCallback","toHaveBeenCalled","toThrow","__WEBPACK_IMPORTED_MODULE_0__dom_helpers__","mockElementStyles","property1","property2","property3","property4","targetElement","checkElementStyles","documentSpy","appendedElement","mockElementChild1","mockElementChild2","mockElement","nodeList","mockStyles","background-color","color","margin","padding","dont-care","expectedCssText","filter"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAI,EAAAJ,EACAK,GAAA,EACAH,WAUA,OANAJ,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,GAAA,EAGAF,EAAAD,QAvBA,GAAAD,KA+DA,OAnCAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAK,EAAA,SAAAK,GAA2C,MAAAA,IAG3CV,EAAAW,EAAA,SAAAR,EAAAS,EAAAC,GACAb,EAAAc,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAb,EAAAoB,EAAA,SAAAhB,GACA,GAAAS,GAAAT,KAAAiB,WACA,WAA2B,MAAAjB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAJ,GAAAW,EAAAE,EAAA,IAAAA,GACAA,GAIAb,EAAAc,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAlB,KAAAe,EAAAC,IAGtDvB,EAAA0B,EAAA,GAGA1B,IAAA2B,EAAA,KDMM,SAAUvB,EAAQwB,EAAqB5B,GAE7C,YExEAA,GAAAW,EAAAiB,EAAA,qBAAAC,IAAA,IAAMA,GAAqB,SAACC,EAAqBC,GAC7C,GAAMC,MAEAC,EAAc,SAACC,EAAaC,GAC9BD,EAAYE,MAAMC,QAAU,OAC5BF,EAAcG,YAAYJ,IAGxBK,EAAqB,SAACL,GACxB,MAAOA,GAAYM,UACdC,QAAQ,QAAS,QACjBA,QAAQ,SAAU,UAGrBC,EAAU,SAACC,EAAwBR,EAAeS,GACpD,GAAMV,GAAcH,EAAgBI,EAEpCF,GAAYC,EAAaC,GACzBL,EAAoBa,EAAwBC,EAAQV,EAEpD,IAAMW,GAAeN,EAAmBL,EAIxC,OAFAA,GAAYY,SAELD,GAGLE,EAAe,SAACC,GAClB,GAAMC,GAAe,6LAErB,OAAOA,GAAaR,QAAQ,WAAYO,IAGtCE,EAAY,SAACP,EAAwBQ,EAAQhB,EAAeS,EAAQQ,GACtE,GAAMJ,GAAcN,EAAQC,EAAwBR,EAAeS,GAE7DS,EAAMD,GAASL,EAAaC,KAAiBM,KAAM,iBAEzD,OAAOH,GAAOI,gBAAgBF,IAG5BG,EAAkB,SAACb,EAAwBR,EAAeS,EAAQQ,GACpE,GAAMD,GAASP,EAAOa,KAAOb,EAAOc,WAAad,EAE7Ce,EAAc3B,EAAMmB,EAExB,IAAIQ,EACA,MAAOA,EAGX,IAAMC,GAASV,EAAUP,EAAwBQ,EAAQhB,EAAeS,EAAQQ,EAIhF,OAFApB,GAAMmB,GAAUS,EAETA,EAGX,QACIJ,qBFgFF,SAAUpD,EAAQwB,EAAqB5B,GAE7C,YAC+BA,GAAoBW,EAAEiB,EAAqB,IAAK,WAAa,MAAOiC,KACpE7D,EAAoBW,EAAEiB,EAAqB,IAAK,WAAa,MAAOkC,KG9InG9D,EAAAW,EAAAiB,EAAA,qBAAAmC,IAAA,IAAMC,GAAc,SAACC,GACjB,GAAMC,GAAUD,EAAOE,WAAW,KAElCD,GAAQE,UAAU,EAAG,EAAGH,EAAOI,MAAOJ,EAAOK,SAG3CT,EAAkB,SAAClB,EAAwBa,EAAiBS,EAAQM,EAAO3B,EAAQQ,EAASjB,EAAeqC,GAC7G,GAAMZ,GAASJ,EAAgBb,EAAwBR,EAAeS,EAAQQ,GACxEc,EAAUD,EAAOE,WAAW,KAElCI,GAAME,OAAS,WACXT,EAAYC,GACZC,EAAQQ,UAAUH,EAAO,EAAG,GAE5BC,KAGJD,EAAMI,QAAU,WACZ,KAAM,IAAIC,OAAM,0BAGpBL,EAAMM,IAAMjB,GAGVE,EAAuB,SAACnB,EAAwBa,EAAiBS,EAAQM,EAAO3B,EAAQQ,EAASjB,GACnG,MAAO,IAAI2C,SAAQjB,EAAgBkB,KAAK,KAAMpC,EAAwBa,EAAiBS,EAAQM,EAAO3B,EAAQQ,EAASjB,KAGrH4B,EAAuB,SAAC5B,EAAe8B,GACzC,GAAMC,GAAUD,EAAOE,WAAW,MAC5Ba,EAAa7C,EAAc8C,UAC3BC,EAAY/C,EAAcgD,YAC1BC,EAAajD,EAAckD,YAEjCnB,GAAQoB,yBAA2B,SACnCpB,EAAQqB,UAAY,OACpBrB,EAAQsB,SAAS,EAAGR,EAAYE,EAAWE,KHuJzC,SAAUhF,EAAQwB,EAAqB5B,GAE7C,YAC+BA,GAAoBW,EAAEiB,EAAqB,IAAK,WAAa,MAAO6D,KACpEzF,EAAoBW,EAAEiB,EAAqB,IAAK,WAAa,MAAO8D,KACpE1F,EAAoBW,EAAEiB,EAAqB,IAAK,WAAa,MAAO+D,KACpE3F,EAAoBW,EAAEiB,EAAqB,IAAK,WAAa,MAAOE,KIjMnG9B,EAAAW,EAAAiB,EAAA,qBAAAG,IAAA,IAAM0D,GAAoB,SAACG,EAASC,GAChC9E,OAAO+E,KAAKD,GAAQE,QAAQ,SAAAC,GACxBJ,EAAQxD,MAAM4D,GAAgBH,EAAOG,MAIvCN,EAAgB,SAACO,EAAU9D,EAAe+D,EAASC,GACrD,GAAMC,GAAeH,EAASI,cAAcH,EAQ5C,OANIC,IACAV,EAAkBW,EAAcD,GAGpChE,EAAcG,YAAY8D,GAEnBA,GAGLT,EAAgB,SAACC,GACnBH,EAAkBG,GACdU,WAAY,UACZC,QAAS,KAIXC,GAAyB,mBAAoB,QAAS,SAAU,WAChEC,GAAiB,SAAU,SAAU,SACrCC,EAAiB,SAACR,GAAD,MAAaO,GAAcE,QAAQT,EAAQU,kBAAmB,GAE/E9E,EAAsB,SAACa,EAAwBC,EAAQgD,GACzD,IAAIc,EAAed,EAAQM,SAA3B,CAIA,GAAMW,GAAgBjE,EAAOkE,iBAAiBlB,GAExCmB,EAA+BP,EAAsBQ,IAAI,SAAAhB,GAC3D,GAAMiB,GAAgBJ,EAAcK,iBAAiBlB,EAErD,OAAUA,GAAV,IAA0BiB,GAG9BrB,GAAQxD,MAAM+E,QAAUJ,EAA6BK,KAAK,KAE1DzE,EAAuBiD,EAAQyB,UAAUtB,QAAQjE,EAAoBiD,KAAK,KAAMpC,EAAwBC,MAGtGb,EAAkB,SAAC6D,GACrB,GAAM0B,IAAc,CAEpB,OAAO1B,GAAQ2B,UAAUD,KJ4MvB,SAAUlH,EAAQwB,EAAqB5B,GAE7C,YACqB,IAAIwH,GAA8CxH,EAAoB,EK7P3FyH,UAAS,sBAAuB,WAC5B,GAAMC,GAA4BC,QAAQC,aAAa,qBAAsB,kBAAmB,YAAa,cAAe,WACtHC,EAA4BF,QAAQC,aAAa,cAAe,oBAChEE,EAA4BH,QAAQI,UAAU,eAC9CC,EAA4BL,QAAQI,UAAU,0BAC9CE,EAA4BN,QAAQI,UAAU,uBAC9CG,EAAgB,gBAChBC,EAA6B,4BAEnCT,GAAkBtF,SAClBsF,EAAkBlF,UAAY,8BAC9BkF,EAAkBnE,gBAAgB6E,IAAIC,YAAYH,GAClDD,EAAoBG,IAAIE,SAAS,SAAA1C,GAAA,MAAWA,KAC5CoC,EAAuBI,IAAIE,SAAS,SAACH,EAA4BN,EAAYjC,GAGzE,MAFAA,GAAQpD,UAAY,2BAEboD,GAGX,IAAM2C,GAAU,iBAAMvI,GAAAK,EAAAmH,EAAA,GAAmBQ,EAAwBC,GAEjER,UAAS,oBAAqB,WAC1B,GAAMxE,GAAe,8LACfuF,EAAmB,SAACC,GAAD,MAAaxF,GAAaR,QAAQ,WAAYgG,IACjEC,EAAa,WACf,MAAOH,KAAU/E,gBAAgB2E,EAA4BT,EAAmBG,EAAYC,GAGhGa,IAAG,oBAAqB,WACpBC,OAAOL,IAAU/E,iBAAiBqF,QAAQlB,QAAQmB,IAAIC,aAG1DJ,GAAG,sBAAuB,WACtB,GAAM3F,GAAc,wBAEpB0F,KAEAE,OAAOd,GAAakB,sBAAsBR,EAAiBxF,KAAiBM,KAAM,yBL6QxF,SAAUlD,EAAQwB,EAAqB5B,GAE7C,YACqB,IAAIiJ,GAAgDjJ,EAAoB,EMnT7FyH,UAAS,wBAAyB,WAC9B,GAAMyB,GAAavB,QAAQC,aAAa,cAAe,eACjDuB,EAAkB,kBAClBC,EAAmB,mBACnBC,GACF7D,SAAUmC,QAAQI,UAAU,YAC5BrD,UAAWiD,QAAQI,UAAU,aAC7B3D,UAAWuD,QAAQI,UAAU,cAE3BF,EAAa,aACbyB,KACAxB,EAAc,cACdyB,EAAmB,mBACnBpB,EAA6B,6BAC7BqB,EAAsB7B,QAAQI,UAAU,uBACxC0B,EAAe9B,QAAQI,UAAU,gBACjCL,GACFzC,UAAW,YACXE,YAAa,cACbE,aAAc,eAGlBmE,GAAoBpB,IAAIC,YAAYkB,GACpCL,EAAW7E,MAAQ8E,EACnBD,EAAW5E,OAAS8E,EACpBF,EAAW/E,WAAWiE,IAAIC,YAAYgB,GAEtC5B,SAAS,yBAA0B,WAC/BkB,GAAG,oBAAqB,WACpBC,OAAOK,EAAA,GAAsBJ,QAAQlB,QAAQmB,IAAIC,aAGrDJ,GAAG,0BAA2B,WAC1BC,OAAO5I,EAAAK,EAAA4I,EAAA,GAAqBd,EAA4BqB,EAAqBN,EAAYI,EAAWzB,EAAYC,EAAaJ,IAAoBmB,QAAQlB,QAAQmB,IAAIhE,cAI7K2C,SAAS,oBAAqB,WAC1B,GAAMiB,GAAa,WACf1I,EAAAK,EAAA4I,EAAA,GAAgBd,EAA4BqB,EAAqBN,EAAYI,EAAWzB,EAAYC,EAAaJ,EAAmB+B,GAGxId,IAAG,8BAA+B,WAC9BD,IAEAE,OAAOY,GAAqBR,qBAAqBb,EAA4BT,EAAmBG,EAAYC,KAGhHa,GAAG,8BAA+B,WAC9BD,IAEAE,OAAOU,EAAUzE,KAAKgE,QAAQU,KAGlCZ,GAAG,2BAA4B,WAC3BD,IAGAY,EAAU7E,SAGVmE,OAAOS,EAAYjF,WAAW4E,qBAAqB,EAAG,EAAGG,EAAiBC,GAC1ER,OAAOS,EAAY3E,WAAWsE,qBAAqBM,EAAW,EAAG,GACjEV,OAAOa,GAAcC,qBAGzBf,GAAG,4BAA6B,WAC5BD,IAEAE,OAAOU,EAAU3E,SAASgF,QAAQ,GAAI/E,OAAM,8BAIpD6C,SAAS,yBAA0B,WAC/BkB,GAAG,oBAAqB,WACpBC,OAAOK,EAAA,GAAsBJ,QAAQlB,QAAQmB,IAAIC,aAGrDJ,GAAG,4CAA6C,WAE5C3I,EAAAK,EAAA4I,EAAA,GAAqBvB,EAAmBwB,GAGxCN,OAAOS,EAAY/D,0BAA0BuD,QAAQ,UACrDD,OAAOS,EAAY9D,WAAWsD,QAAQ,QACtCD,OAAOS,EAAY7D,UAAUwD,qBACzB,EACAtB,EAAkBzC,UAClByC,EAAkBvC,YAClBuC,EAAkBrC,qBNyT5B,SAAUjF,EAAQwB,EAAqB5B,GAE7C,YACqB,IAAI4J,GAA6C5J,EAAoB,GOnZpF6J,GACFC,UAAW,YACXC,UAAW,YACXC,UAAW,YACXC,UAAW,YAGfxC,UAAS,qBAAsB,WAC3BA,SAAS,sBAAuB,WAC5BkB,GAAG,oBAAqB,WACpBC,OAAOgB,EAAA,GAAmBf,QAAQlB,QAAQmB,IAAIC,aAGlDJ,GAAG,kCAAmC,WAClC,GAAIuB,IACA9H,SAGJpC,GAAAK,EAAAuJ,EAAA,GAAkBM,EAAeL,GAEjCM,EAAmBD,EAAeL,OAI1CpC,SAAS,kBAAmB,WACxBkB,GAAG,oBAAqB,WACpBC,OAAOgB,EAAA,GAAef,QAAQlB,QAAQmB,IAAIC,aAG9CJ,GAAG,oDAAqD,WAEpD,GAAMjB,IACFpF,YAAaqF,QAAQI,UAAU,gBAE7B8B,KACAO,EAAczC,QAAQC,aAAa,YAAa,iBAEtDwC,GAAY/D,cAAc+B,IAAIC,aAC1BjG,UAIJ,IAAMiI,GAAkBrK,EAAAK,EAAAuJ,EAAA,GAAcQ,EAAa1C,EAAmB,UAAWmC,EAGjFjB,QAAOwB,EAAY/D,eAAe2C,qBAAqB,WACvDJ,OAAOlB,EAAkBpF,aAAa0G,qBAAqBqB,GAC3DF,EAAmBE,EAAiBR,OAI5CpC,SAAS,kBAAmB,WACxBkB,GAAG,oBAAqB,WACpBC,OAAOgB,EAAA,GAAef,QAAQlB,QAAQmB,IAAIC,aAG9CJ,GAAG,2CAA4C,WAC3C,GAAIuB,IACA9H,SAGJpC,GAAAK,EAAAuJ,EAAA,GAAcM,GAEdtB,OAAOsB,EAAc9H,MAAMkE,YAAYuC,QAAQ,WAC/CD,OAAOsB,EAAc9H,MAAMmE,SAASsC,QAAQ,OAIpDpB,SAAS,wBAAyB,WAC9B,GAAMI,GAAaF,QAAQC,aAAa,cAAe,qBACjD0C,GACFpE,QAAS,GACT9D,SACAiF,aAEEkD,GACFrE,QAAS,GACT9D,SACAiF,aAEEmD,GACFtE,QAAS,GACT9D,SACAiF,UAAWiD,EAAmBC,IAE5BpC,EAA6B,SAACsC,GAAD,MAAcA,IAC3CC,GACFC,mBAAoB,mBACpBC,MAAS,QACTC,OAAU,SACVC,QAAW,UACXC,YAAa,aAEXC,EAAkBjK,OAAO+E,KAAK4E,GAC/BO,OAAO,SAAAjF,GAAA,MAAiC,cAAjBA,IACvBgB,IAAI,SAAAhB,GAAA,MAAmBA,GAAnB,IAAmC0E,EAAW1E,KAClDoB,KAAK,IAEVS,GAAWf,iBAAiBsB,IAAIC,aAC5BnB,iBAAkB,SAAClB,GAAD,MAAkB0E,GAAW1E,MAGnD2C,GAAG,gCAAiC,WAChC3I,EAAAK,EAAAuJ,EAAA,GAAoBzB,EAA4BN,EAAY2C,GAE5D5B,OAAO4B,EAAYpI,MAAM+E,SAAS0B,QAAQmC,GAC1CpC,OAAO4B,EAAYnD,SAAS,GAAGjF,MAAM+E,SAAS0B,QAAQmC,GACtDpC,OAAO4B,EAAYnD,SAAS,GAAGjF,MAAM+E,SAAS0B,QAAQmC,OAI9DvD,SAAS,oBAAqB,WAC1BkB,GAAG,mCAAoC,WACnC,GAAM6B,GAAc7C,QAAQC,aAAa,eAAgB,aAEzD5H,GAAAK,EAAAuJ,EAAA,GAAgBY,GAEhB5B,OAAO4B,EAAYjD,WAAWyB,sBAAqB,QAK/D,IAAMmB,GAAqB,SAACvE,EAASC,GACjC9E,OAAO+E,KAAKD,GAAQE,QAAQ,SAAAC,GACxB4C,OAAOhD,EAAQxD,MAAM4D,IAAe6C,QAAQhD,EAAOG,QPiarD,SAAU5F,EAAQwB,EAAqB5B,GAE7C,YACAe,QAAOC,eAAeY,EAAqB,cAAgBlB,OAAO,GACcV,GAAoB,GAClBA,EAAoB,GQ1iBtGA,EAAA","file":"specs.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 6);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return bodyInlinerFactory; });\nvar bodyInlinerFactory = function (inlineElementStyles, getElementClone) {\n    var cache = {};\n\n    var appendClone = function (parentClone, parentElement) {\n        parentClone.style.display = 'none';\n        parentElement.appendChild(parentClone);\n    };\n\n    var replaceBodyWithDiv = function (parentClone) {\n        return parentClone.outerHTML.replace('<body', '<div').replace('</body', '</div');\n    };\n\n    var getHTML = function (convertNodeListToArray, parentElement, window) {\n        var parentClone = getElementClone(parentElement);\n\n        appendClone(parentClone, parentElement); // we need to append the clone for styles to take effect\n        inlineElementStyles(convertNodeListToArray, window, parentClone); // inline styles so the scroller gets them as well\n\n        var fullPageHTML = replaceBodyWithDiv(parentClone);\n\n        parentClone.remove();\n\n        return fullPageHTML;\n    };\n\n    var addHTMLToSvg = function (inlinedHTML) {\n        var svgContainer = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\"><foreignObject width=\"100%\" height=\"100%\"><div xmlns=\"http://www.w3.org/1999/xhtml\">{{html}}</div></foreignObject></svg>';\n\n        return svgContainer.replace('{{html}}', inlinedHTML);\n    };\n\n    var getSvgUrl = function (convertNodeListToArray, domUrl, parentElement, window, getBlob) {\n        var inlinedHTML = getHTML(convertNodeListToArray, parentElement, window);\n\n        var svg = getBlob([addHTMLToSvg(inlinedHTML)], { type: 'image/svg+xml' });\n\n        return domUrl.createObjectURL(svg);\n    };\n\n    var getCachedSvgUrl = function (convertNodeListToArray, parentElement, window, getBlob) {\n        var domUrl = window.URL || window.webkitURL || window;\n\n        var cachedValue = cache[domUrl];\n\n        if (cachedValue) {\n            return cachedValue;\n        }\n\n        var svgUrl = getSvgUrl(convertNodeListToArray, domUrl, parentElement, window, getBlob);\n\n        cache[domUrl] = svgUrl;\n\n        return svgUrl;\n    };\n\n    return {\n        getCachedSvgUrl: getCachedSvgUrl\n    };\n};\n\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return drawSvgToCanvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return drawSvgToCanvasAsync; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return drawWhereYouAtWindow; });\nvar clearCanvas = function (canvas) {\n    var context = canvas.getContext('2d');\n\n    context.clearRect(0, 0, canvas.width, canvas.height);\n};\n\nvar drawSvgToCanvas = function (convertNodeListToArray, getCachedSvgUrl, canvas, image, window, getBlob, parentElement, callback) {\n    var svgUrl = getCachedSvgUrl(convertNodeListToArray, parentElement, window, getBlob);\n    var context = canvas.getContext('2d');\n\n    image.onload = function () {\n        clearCanvas(canvas);\n        context.drawImage(image, 0, 0);\n\n        callback();\n    };\n\n    image.onerror = function () {\n        throw new Error('Could not load image!');\n    };\n\n    image.src = svgUrl;\n};\n\nvar drawSvgToCanvasAsync = function (convertNodeListToArray, getCachedSvgUrl, canvas, image, window, getBlob, parentElement) {\n    return new Promise(drawSvgToCanvas.bind(null, convertNodeListToArray, getCachedSvgUrl, canvas, image, window, getBlob, parentElement));\n};\n\nvar drawWhereYouAtWindow = function (parentElement, canvas) {\n    var context = canvas.getContext('2d');\n    var rectStartY = parentElement.scrollTop;\n    var rectWidth = parentElement.clientWidth;\n    var rectHeight = parentElement.clientHeight;\n\n    context.globalCompositeOperation = 'darken';\n    context.fillStyle = 'grey';\n    context.fillRect(0, rectStartY, rectWidth, rectHeight);\n};\n\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return addStyleToElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return appendElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return fadeInElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return inlineElementStyles; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return getElementClone; });\nvar addStyleToElement = function (element, styles) {\n    Object.keys(styles).forEach(function (propertyName) {\n        element.style[propertyName] = styles[propertyName];\n    });\n};\n\nvar appendElement = function (document, parentElement, tagName, elementStyles) {\n    var childElement = document.createElement(tagName);\n\n    if (elementStyles) {\n        addStyleToElement(childElement, elementStyles);\n    }\n\n    parentElement.appendChild(childElement);\n\n    return childElement;\n};\n\nvar fadeInElement = function (element) {\n    addStyleToElement(element, {\n        visibility: 'visible',\n        opacity: 1\n    });\n};\n\nvar visualStyleProperties = ['background-color', 'color', 'margin', 'padding'];\nvar notVisualTags = ['script', 'iframe', 'style'];\nvar isNotVisualTag = function (tagName) {\n    return notVisualTags.indexOf(tagName.toLowerCase()) !== -1;\n};\n\nvar inlineElementStyles = function (convertNodeListToArray, window, element) {\n    if (isNotVisualTag(element.tagName)) {\n        return;\n    }\n\n    var computedStyle = window.getComputedStyle(element);\n\n    var elementVisualStyleProperties = visualStyleProperties.map(function (propertyName) {\n        var propertyValue = computedStyle.getPropertyValue(propertyName);\n\n        return propertyName + ':' + propertyValue;\n    });\n\n    element.style.cssText = elementVisualStyleProperties.join(';');\n\n    convertNodeListToArray(element.children).forEach(inlineElementStyles.bind(null, convertNodeListToArray, window));\n};\n\nvar getElementClone = function (element) {\n    var isDeepClone = true;\n\n    return element.cloneNode(isDeepClone);\n};\n\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__body_inliner__ = __webpack_require__(0);\n\n\ndescribe('body-inliner module', function () {\n    var mockParentElement = jasmine.createSpyObj('mockParentElement', ['createObjectURL', 'cloneNode', 'appendChild', 'remove']);\n    var mockWindow = jasmine.createSpyObj('mockWindow', ['createObjectURL']);\n    var mockGetBlob = jasmine.createSpy('mockGetBlob');\n    var mockInlineElementStyle = jasmine.createSpy('mockInlineElementStyle');\n    var mockGetElementClone = jasmine.createSpy('mockGetElementClone');\n    var mockObjectUrl = 'mockObjectUrl';\n    var mockConvertNodeListToArray = 'mockConvertNodeListToArray';\n\n    mockParentElement.style = {};\n    mockParentElement.outerHTML = '<body>notInlinedHTML</body>';\n    mockParentElement.createObjectURL.and.returnValue(mockObjectUrl);\n    mockGetElementClone.and.callFake(function (element) {\n        return element;\n    });\n    mockInlineElementStyle.and.callFake(function (mockConvertNodeListToArray, mockWindow, element) {\n        element.outerHTML = '<body>inlinedHTML</body>';\n\n        return element;\n    });\n\n    var initSUT = function () {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__body_inliner__[\"a\" /* bodyInlinerFactory */])(mockInlineElementStyle, mockGetElementClone);\n    };\n\n    describe('getCachedSvgUrl()', function () {\n        var svgContainer = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\"><foreignObject width=\"100%\" height=\"100%\"><div xmlns=\"http://www.w3.org/1999/xhtml\">{{html}}</div></foreignObject></svg>';\n        var fillSvgContainer = function (content) {\n            return svgContainer.replace('{{html}}', content);\n        };\n        var callMethod = function () {\n            return initSUT().getCachedSvgUrl(mockConvertNodeListToArray, mockParentElement, mockWindow, mockGetBlob);\n        };\n\n        it('should be defined', function () {\n            expect(initSUT().getCachedSvgUrl).toEqual(jasmine.any(Function));\n        });\n\n        it('should call getBlob', function () {\n            var inlinedHTML = '<div>inlinedHTML</div>';\n\n            callMethod();\n\n            expect(mockGetBlob).toHaveBeenCalledWith([fillSvgContainer(inlinedHTML)], { type: 'image/svg+xml' });\n        });\n    });\n});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__canvas_helpers__ = __webpack_require__(1);\n\n\ndescribe('canvas-helpers module', function () {\n    var mockCanvas = jasmine.createSpyObj('mockCanvas', ['getContext']);\n    var mockCanvasWidth = 'mockCanvasWidth';\n    var mockCanvasHeight = 'mockCanvasHeight';\n    var mockContext = {\n        fillRect: jasmine.createSpy('fillRect'),\n        drawImage: jasmine.createSpy('drawImage'),\n        clearRect: jasmine.createSpy('clearRect')\n    };\n    var mockWindow = 'mockWindow';\n    var mockImage = {};\n    var mockGetBlob = 'mockGetBlob';\n    var mockCachedSvgUrl = 'mockCachedSvgUrl';\n    var mockConvertNodeListToArray = 'mockConvertNodeListToArray';\n    var mockGetCachedSvgUrl = jasmine.createSpy('mockGetCachedSvgUrl');\n    var mockCallback = jasmine.createSpy('mockCallback');\n    var mockParentElement = {\n        scrollTop: 'scrollTop',\n        clientWidth: 'clientWidth',\n        clientHeight: 'clientHeight'\n    };\n\n    mockGetCachedSvgUrl.and.returnValue(mockCachedSvgUrl);\n    mockCanvas.width = mockCanvasWidth;\n    mockCanvas.height = mockCanvasHeight;\n    mockCanvas.getContext.and.returnValue(mockContext);\n\n    describe('drawSvgToCanvasAsync()', function () {\n        it('should be defined', function () {\n            expect(__WEBPACK_IMPORTED_MODULE_0__canvas_helpers__[\"a\" /* drawSvgToCanvasAsync */]).toEqual(jasmine.any(Function));\n        });\n\n        it('should return a promise', function () {\n            expect(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__canvas_helpers__[\"a\" /* drawSvgToCanvasAsync */])(mockConvertNodeListToArray, mockGetCachedSvgUrl, mockCanvas, mockImage, mockWindow, mockGetBlob, mockParentElement)).toEqual(jasmine.any(Promise));\n        });\n    });\n\n    describe('drawSvgToCanvas()', function () {\n        var callMethod = function () {\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__canvas_helpers__[\"b\" /* drawSvgToCanvas */])(mockConvertNodeListToArray, mockGetCachedSvgUrl, mockCanvas, mockImage, mockWindow, mockGetBlob, mockParentElement, mockCallback);\n        };\n\n        it('should call getCachedSvgUrl', function () {\n            callMethod();\n\n            expect(mockGetCachedSvgUrl).toHaveBeenCalledWith(mockConvertNodeListToArray, mockParentElement, mockWindow, mockGetBlob);\n        });\n\n        it('should set src of the image', function () {\n            callMethod();\n\n            expect(mockImage.src).toEqual(mockCachedSvgUrl);\n        });\n\n        it('should set onload method', function () {\n            callMethod();\n\n            // WHEN\n            mockImage.onload();\n\n            // THEN\n            expect(mockContext.clearRect).toHaveBeenCalledWith(0, 0, mockCanvasWidth, mockCanvasHeight);\n            expect(mockContext.drawImage).toHaveBeenCalledWith(mockImage, 0, 0);\n            expect(mockCallback).toHaveBeenCalled();\n        });\n\n        it('should set onerror method', function () {\n            callMethod();\n\n            expect(mockImage.onerror).toThrow(new Error('Could not load image!'));\n        });\n    });\n\n    describe('drawWhereYouAtWindow()', function () {\n        it('should be defined', function () {\n            expect(__WEBPACK_IMPORTED_MODULE_0__canvas_helpers__[\"c\" /* drawWhereYouAtWindow */]).toEqual(jasmine.any(Function));\n        });\n\n        it('should draw window on the provided canvas', function () {\n            // WHEN\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__canvas_helpers__[\"c\" /* drawWhereYouAtWindow */])(mockParentElement, mockCanvas);\n\n            // THEN\n            expect(mockContext.globalCompositeOperation).toEqual('darken');\n            expect(mockContext.fillStyle).toEqual('grey');\n            expect(mockContext.fillRect).toHaveBeenCalledWith(0, mockParentElement.scrollTop, mockParentElement.clientWidth, mockParentElement.clientHeight);\n        });\n    });\n});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__dom_helpers__ = __webpack_require__(2);\n\n\nvar mockElementStyles = {\n    property1: 'property1',\n    property2: 'property2',\n    property3: 'property3',\n    property4: 'property4'\n};\n\ndescribe('dom-helpers module', function () {\n    describe('addStyleToElement()', function () {\n        it('should be defined', function () {\n            expect(__WEBPACK_IMPORTED_MODULE_0__dom_helpers__[\"a\" /* addStyleToElement */]).toEqual(jasmine.any(Function));\n        });\n\n        it('should add styles to an element', function () {\n            var targetElement = {\n                style: {}\n            };\n\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__dom_helpers__[\"a\" /* addStyleToElement */])(targetElement, mockElementStyles);\n\n            checkElementStyles(targetElement, mockElementStyles);\n        });\n    });\n\n    describe('appendElement()', function () {\n        it('should be defined', function () {\n            expect(__WEBPACK_IMPORTED_MODULE_0__dom_helpers__[\"b\" /* appendElement */]).toEqual(jasmine.any(Function));\n        });\n\n        it('should append child element after applying styles', function () {\n            // GIVEN\n            var mockParentElement = {\n                appendChild: jasmine.createSpy('appendChild')\n            };\n            var mockElementStyles = {};\n            var documentSpy = jasmine.createSpyObj('document', ['createElement']);\n\n            documentSpy.createElement.and.returnValue({\n                style: {}\n            });\n\n            // WHEN\n            var appendedElement = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__dom_helpers__[\"b\" /* appendElement */])(documentSpy, mockParentElement, 'tagName', mockElementStyles);\n\n            // THEN\n            expect(documentSpy.createElement).toHaveBeenCalledWith('tagName');\n            expect(mockParentElement.appendChild).toHaveBeenCalledWith(appendedElement);\n            checkElementStyles(appendedElement, mockElementStyles);\n        });\n    });\n\n    describe('fadeInElement()', function () {\n        it('should be defined', function () {\n            expect(__WEBPACK_IMPORTED_MODULE_0__dom_helpers__[\"c\" /* fadeInElement */]).toEqual(jasmine.any(Function));\n        });\n\n        it('should add visibility and opacity styles', function () {\n            var targetElement = {\n                style: {}\n            };\n\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__dom_helpers__[\"c\" /* fadeInElement */])(targetElement);\n\n            expect(targetElement.style.visibility).toEqual('visible');\n            expect(targetElement.style.opacity).toEqual(1);\n        });\n    });\n\n    describe('inlineElementStyles()', function () {\n        var mockWindow = jasmine.createSpyObj('mockWindow', ['getComputedStyle']);\n        var mockElementChild1 = {\n            tagName: '',\n            style: {},\n            children: []\n        };\n        var mockElementChild2 = {\n            tagName: '',\n            style: {},\n            children: []\n        };\n        var mockElement = {\n            tagName: '',\n            style: {},\n            children: [mockElementChild1, mockElementChild2]\n        };\n        var mockConvertNodeListToArray = function (nodeList) {\n            return nodeList;\n        };\n        var mockStyles = {\n            'background-color': 'background-color',\n            'color': 'color',\n            'margin': 'margin',\n            'padding': 'padding',\n            'dont-care': 'dont-care'\n        };\n        var expectedCssText = Object.keys(mockStyles).filter(function (propertyName) {\n            return propertyName !== 'dont-care';\n        }).map(function (propertyName) {\n            return propertyName + ':' + mockStyles[propertyName];\n        }).join(';');\n\n        mockWindow.getComputedStyle.and.returnValue({\n            getPropertyValue: function (propertyName) {\n                return mockStyles[propertyName];\n            }\n        });\n\n        it('should add cssText to element', function () {\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__dom_helpers__[\"d\" /* inlineElementStyles */])(mockConvertNodeListToArray, mockWindow, mockElement);\n\n            expect(mockElement.style.cssText).toEqual(expectedCssText);\n            expect(mockElement.children[0].style.cssText).toEqual(expectedCssText);\n            expect(mockElement.children[1].style.cssText).toEqual(expectedCssText);\n        });\n    });\n\n    describe('getElementClone()', function () {\n        it('should call cloneNode on element', function () {\n            var mockElement = jasmine.createSpyObj('mockElement', ['cloneNode']);\n\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__dom_helpers__[\"e\" /* getElementClone */])(mockElement);\n\n            expect(mockElement.cloneNode).toHaveBeenCalledWith(true);\n        });\n    });\n});\n\nvar checkElementStyles = function (element, styles) {\n    Object.keys(styles).forEach(function (propertyName) {\n        expect(element.style[propertyName]).toEqual(styles[propertyName]);\n    });\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_body_inliner_test__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_canvas_helpers_test__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__lib_dom_helpers_test__ = __webpack_require__(5);\n// TESTS\n\n\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// specs.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 284212e38c870e12b16c","const bodyInlinerFactory = (inlineElementStyles, getElementClone) => {\r\n    const cache = {};\r\n\r\n    const appendClone = (parentClone, parentElement) => {\r\n        parentClone.style.display = 'none';\r\n        parentElement.appendChild(parentClone);\r\n    };\r\n\r\n    const replaceBodyWithDiv = (parentClone) => {\r\n        return parentClone.outerHTML\r\n            .replace('<body', '<div')\r\n            .replace('</body', '</div');\r\n    };\r\n\r\n    const getHTML = (convertNodeListToArray, parentElement, window) => {\r\n        const parentClone = getElementClone(parentElement);\r\n\r\n        appendClone(parentClone, parentElement);                            // we need to append the clone for styles to take effect\r\n        inlineElementStyles(convertNodeListToArray, window, parentClone);   // inline styles so the scroller gets them as well\r\n\r\n        const fullPageHTML = replaceBodyWithDiv(parentClone);\r\n\r\n        parentClone.remove();\r\n\r\n        return fullPageHTML;\r\n    };\r\n\r\n    const addHTMLToSvg = (inlinedHTML) => {\r\n        const svgContainer = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\"><foreignObject width=\"100%\" height=\"100%\"><div xmlns=\"http://www.w3.org/1999/xhtml\">{{html}}</div></foreignObject></svg>';\r\n\r\n        return svgContainer.replace('{{html}}', inlinedHTML);\r\n    };\r\n\r\n    const getSvgUrl = (convertNodeListToArray, domUrl, parentElement, window, getBlob) => {\r\n        const inlinedHTML = getHTML(convertNodeListToArray, parentElement, window);\r\n\r\n        const svg = getBlob([addHTMLToSvg(inlinedHTML)], { type: 'image/svg+xml' });\r\n        \r\n        return domUrl.createObjectURL(svg);\r\n    };\r\n\r\n    const getCachedSvgUrl = (convertNodeListToArray, parentElement, window, getBlob) => {\r\n        const domUrl = window.URL || window.webkitURL || window;\r\n\r\n        let cachedValue = cache[domUrl];\r\n        \r\n        if (cachedValue) {\r\n            return cachedValue;\r\n        }\r\n\r\n        const svgUrl = getSvgUrl(convertNodeListToArray, domUrl, parentElement, window, getBlob);\r\n\r\n        cache[domUrl] = svgUrl;\r\n\r\n        return svgUrl;\r\n    };\r\n\r\n    return {\r\n        getCachedSvgUrl\r\n    };\r\n};\r\n\r\nexport {\r\n    bodyInlinerFactory\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/body-inliner.js","const clearCanvas = (canvas) => {\r\n    const context = canvas.getContext('2d');\r\n\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n};\r\n\r\nconst drawSvgToCanvas = (convertNodeListToArray, getCachedSvgUrl, canvas, image, window, getBlob, parentElement, callback) => {\r\n    const svgUrl = getCachedSvgUrl(convertNodeListToArray, parentElement, window, getBlob);\r\n    const context = canvas.getContext('2d');\r\n\r\n    image.onload = () => {\r\n        clearCanvas(canvas);\r\n        context.drawImage(image, 0, 0);\r\n\r\n        callback();\r\n    };\r\n\r\n    image.onerror = () => {\r\n        throw new Error('Could not load image!');\r\n    };\r\n\r\n    image.src = svgUrl;\r\n};\r\n\r\nconst drawSvgToCanvasAsync = (convertNodeListToArray, getCachedSvgUrl, canvas, image, window, getBlob, parentElement) => {\r\n    return new Promise(drawSvgToCanvas.bind(null, convertNodeListToArray, getCachedSvgUrl, canvas, image, window, getBlob, parentElement));\r\n};\r\n\r\nconst drawWhereYouAtWindow = (parentElement, canvas) => {\r\n    const context = canvas.getContext('2d');\r\n    const rectStartY = parentElement.scrollTop;\r\n    const rectWidth = parentElement.clientWidth;\r\n    const rectHeight = parentElement.clientHeight;\r\n\r\n    context.globalCompositeOperation = 'darken';\r\n    context.fillStyle = 'grey';\r\n    context.fillRect(0, rectStartY, rectWidth, rectHeight);\r\n};\r\n\r\nexport {\r\n    drawSvgToCanvas,\r\n    drawSvgToCanvasAsync,\r\n    drawWhereYouAtWindow\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/canvas-helpers.js","const addStyleToElement = (element, styles) => {\r\n    Object.keys(styles).forEach(propertyName => {\r\n        element.style[propertyName] = styles[propertyName];\r\n    });\r\n};\r\n\r\nconst appendElement = (document, parentElement, tagName, elementStyles) => {\r\n    const childElement = document.createElement(tagName);\r\n\r\n    if (elementStyles) {\r\n        addStyleToElement(childElement, elementStyles);\r\n    }\r\n\r\n    parentElement.appendChild(childElement);\r\n\r\n    return childElement;\r\n};\r\n\r\nconst fadeInElement = (element) => {\r\n    addStyleToElement(element, {\r\n        visibility: 'visible',\r\n        opacity: 1\r\n    });\r\n};\r\n\r\nconst visualStyleProperties = ['background-color', 'color', 'margin', 'padding'];\r\nconst notVisualTags = ['script', 'iframe', 'style'];\r\nconst isNotVisualTag = (tagName) => notVisualTags.indexOf(tagName.toLowerCase()) !== -1;\r\n\r\nconst inlineElementStyles = (convertNodeListToArray, window, element) => {\r\n    if (isNotVisualTag(element.tagName)) {\r\n        return;\r\n    }\r\n\r\n    const computedStyle = window.getComputedStyle(element);\r\n\r\n    const elementVisualStyleProperties = visualStyleProperties.map(propertyName => {\r\n        const propertyValue = computedStyle.getPropertyValue(propertyName);\r\n\r\n        return `${propertyName}:${propertyValue}`;\r\n    });\r\n\r\n    element.style.cssText = elementVisualStyleProperties.join(';');\r\n\r\n    convertNodeListToArray(element.children).forEach(inlineElementStyles.bind(null, convertNodeListToArray, window));\r\n};\r\n\r\nconst getElementClone = (element) => {\r\n    const isDeepClone = true;\r\n\r\n    return element.cloneNode(isDeepClone);\r\n};\r\n\r\nexport {\r\n    addStyleToElement,\r\n    appendElement,\r\n    fadeInElement,\r\n    inlineElementStyles,\r\n    getElementClone\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/dom-helpers.js","import {\r\n    bodyInlinerFactory\r\n} from './body-inliner';\r\n\r\ndescribe('body-inliner module', () => {\r\n    const mockParentElement         = jasmine.createSpyObj('mockParentElement', ['createObjectURL', 'cloneNode', 'appendChild', 'remove']);\r\n    const mockWindow                = jasmine.createSpyObj('mockWindow', ['createObjectURL']);\r\n    const mockGetBlob               = jasmine.createSpy('mockGetBlob');\r\n    const mockInlineElementStyle    = jasmine.createSpy('mockInlineElementStyle');\r\n    const mockGetElementClone       = jasmine.createSpy('mockGetElementClone');\r\n    const mockObjectUrl = 'mockObjectUrl';\r\n    const mockConvertNodeListToArray = 'mockConvertNodeListToArray';\r\n\r\n    mockParentElement.style = {};\r\n    mockParentElement.outerHTML = '<body>notInlinedHTML</body>';\r\n    mockParentElement.createObjectURL.and.returnValue(mockObjectUrl);\r\n    mockGetElementClone.and.callFake(element => element);\r\n    mockInlineElementStyle.and.callFake((mockConvertNodeListToArray, mockWindow, element) => {\r\n        element.outerHTML = '<body>inlinedHTML</body>';\r\n\r\n        return element;\r\n    });\r\n\r\n    const initSUT = () => bodyInlinerFactory(mockInlineElementStyle, mockGetElementClone);\r\n\r\n    describe('getCachedSvgUrl()', () => {\r\n        const svgContainer = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\"><foreignObject width=\"100%\" height=\"100%\"><div xmlns=\"http://www.w3.org/1999/xhtml\">{{html}}</div></foreignObject></svg>';\r\n        const fillSvgContainer = (content) => svgContainer.replace('{{html}}', content);\r\n        const callMethod = () => {\r\n            return initSUT().getCachedSvgUrl(mockConvertNodeListToArray, mockParentElement, mockWindow, mockGetBlob);\r\n        };\r\n\r\n        it('should be defined', () => {\r\n            expect(initSUT().getCachedSvgUrl).toEqual(jasmine.any(Function));\r\n        });\r\n\r\n        it('should call getBlob', () => {\r\n            const inlinedHTML = '<div>inlinedHTML</div>';\r\n\r\n            callMethod();\r\n\r\n            expect(mockGetBlob).toHaveBeenCalledWith([fillSvgContainer(inlinedHTML)], { type: 'image/svg+xml' });\r\n        });\r\n    });\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/body-inliner.test.js","import {\r\n    drawSvgToCanvas,\r\n    drawSvgToCanvasAsync,\r\n    drawWhereYouAtWindow\r\n} from './canvas-helpers';\r\n\r\ndescribe('canvas-helpers module', () => {\r\n    const mockCanvas = jasmine.createSpyObj('mockCanvas', ['getContext']);\r\n    const mockCanvasWidth = 'mockCanvasWidth';\r\n    const mockCanvasHeight = 'mockCanvasHeight';\r\n    const mockContext = {\r\n        fillRect: jasmine.createSpy('fillRect'),\r\n        drawImage: jasmine.createSpy('drawImage'),\r\n        clearRect: jasmine.createSpy('clearRect')\r\n    };\r\n    const mockWindow = 'mockWindow';\r\n    const mockImage = {};\r\n    const mockGetBlob = 'mockGetBlob';\r\n    const mockCachedSvgUrl = 'mockCachedSvgUrl';\r\n    const mockConvertNodeListToArray = 'mockConvertNodeListToArray';\r\n    const mockGetCachedSvgUrl = jasmine.createSpy('mockGetCachedSvgUrl');\r\n    const mockCallback = jasmine.createSpy('mockCallback');\r\n    const mockParentElement = {\r\n        scrollTop: 'scrollTop',\r\n        clientWidth: 'clientWidth',\r\n        clientHeight: 'clientHeight',\r\n    };\r\n\r\n    mockGetCachedSvgUrl.and.returnValue(mockCachedSvgUrl);\r\n    mockCanvas.width = mockCanvasWidth;\r\n    mockCanvas.height = mockCanvasHeight;\r\n    mockCanvas.getContext.and.returnValue(mockContext);\r\n\r\n    describe('drawSvgToCanvasAsync()', () => {\r\n        it('should be defined', () => {\r\n            expect(drawSvgToCanvasAsync).toEqual(jasmine.any(Function));\r\n        });\r\n\r\n        it('should return a promise', () => {\r\n            expect(drawSvgToCanvasAsync(mockConvertNodeListToArray, mockGetCachedSvgUrl, mockCanvas, mockImage, mockWindow, mockGetBlob, mockParentElement)).toEqual(jasmine.any(Promise));\r\n        });\r\n    });\r\n\r\n    describe('drawSvgToCanvas()', () => {\r\n        const callMethod = () => {\r\n            drawSvgToCanvas(mockConvertNodeListToArray, mockGetCachedSvgUrl, mockCanvas, mockImage, mockWindow, mockGetBlob, mockParentElement, mockCallback);\r\n        };\r\n\r\n        it('should call getCachedSvgUrl', () => {\r\n            callMethod();\r\n\r\n            expect(mockGetCachedSvgUrl).toHaveBeenCalledWith(mockConvertNodeListToArray, mockParentElement, mockWindow, mockGetBlob);\r\n        });\r\n\r\n        it('should set src of the image', () => {\r\n            callMethod();\r\n\r\n            expect(mockImage.src).toEqual(mockCachedSvgUrl);\r\n        });\r\n\r\n        it('should set onload method', () => {\r\n            callMethod();\r\n\r\n            // WHEN\r\n            mockImage.onload();\r\n\r\n            // THEN\r\n            expect(mockContext.clearRect).toHaveBeenCalledWith(0, 0, mockCanvasWidth, mockCanvasHeight);\r\n            expect(mockContext.drawImage).toHaveBeenCalledWith(mockImage, 0, 0);\r\n            expect(mockCallback).toHaveBeenCalled();\r\n        });\r\n\r\n        it('should set onerror method', () => {\r\n            callMethod();\r\n\r\n            expect(mockImage.onerror).toThrow(new Error('Could not load image!'));\r\n        });\r\n    });\r\n\r\n    describe('drawWhereYouAtWindow()', () => {\r\n        it('should be defined', () => {\r\n            expect(drawWhereYouAtWindow).toEqual(jasmine.any(Function));\r\n        });\r\n\r\n        it('should draw window on the provided canvas', () => {\r\n            // WHEN\r\n            drawWhereYouAtWindow(mockParentElement, mockCanvas);\r\n\r\n            // THEN\r\n            expect(mockContext.globalCompositeOperation).toEqual('darken');\r\n            expect(mockContext.fillStyle).toEqual('grey');\r\n            expect(mockContext.fillRect).toHaveBeenCalledWith(\r\n                0,\r\n                mockParentElement.scrollTop,\r\n                mockParentElement.clientWidth,\r\n                mockParentElement.clientHeight\r\n            );\r\n        });\r\n    });\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/canvas-helpers.test.js","import {\r\n    addStyleToElement,\r\n    appendElement,\r\n    fadeInElement,\r\n    inlineElementStyles,\r\n    getElementClone\r\n} from './dom-helpers';\r\n\r\nconst mockElementStyles = {\r\n    property1: 'property1',\r\n    property2: 'property2',\r\n    property3: 'property3',\r\n    property4: 'property4'\r\n};\r\n\r\ndescribe('dom-helpers module', () => {\r\n    describe('addStyleToElement()', () => {\r\n        it('should be defined', () => {\r\n            expect(addStyleToElement).toEqual(jasmine.any(Function));\r\n        });\r\n\r\n        it('should add styles to an element', () => {\r\n            let targetElement = {\r\n                style: {}\r\n            };\r\n\r\n            addStyleToElement(targetElement, mockElementStyles);\r\n\r\n            checkElementStyles(targetElement, mockElementStyles);\r\n        });\r\n    });\r\n\r\n    describe('appendElement()', () => {\r\n        it('should be defined', () => {\r\n            expect(appendElement).toEqual(jasmine.any(Function));\r\n        });\r\n\r\n        it('should append child element after applying styles', () => {\r\n            // GIVEN\r\n            const mockParentElement = {\r\n                appendChild: jasmine.createSpy('appendChild')\r\n            };\r\n            const mockElementStyles = {};\r\n            const documentSpy = jasmine.createSpyObj('document', ['createElement']);\r\n\r\n            documentSpy.createElement.and.returnValue({\r\n                style: {}\r\n            });\r\n\r\n            // WHEN\r\n            const appendedElement = appendElement(documentSpy, mockParentElement, 'tagName', mockElementStyles);\r\n\r\n            // THEN\r\n            expect(documentSpy.createElement).toHaveBeenCalledWith('tagName');\r\n            expect(mockParentElement.appendChild).toHaveBeenCalledWith(appendedElement);\r\n            checkElementStyles(appendedElement, mockElementStyles);\r\n        });\r\n    });\r\n\r\n    describe('fadeInElement()', () => {\r\n        it('should be defined', () => {\r\n            expect(fadeInElement).toEqual(jasmine.any(Function));\r\n        });\r\n\r\n        it('should add visibility and opacity styles', () => {\r\n            let targetElement = {\r\n                style: {}\r\n            };\r\n\r\n            fadeInElement(targetElement);\r\n\r\n            expect(targetElement.style.visibility).toEqual('visible');\r\n            expect(targetElement.style.opacity).toEqual(1);\r\n        });\r\n    });\r\n\r\n    describe('inlineElementStyles()', () => {\r\n        const mockWindow = jasmine.createSpyObj('mockWindow', ['getComputedStyle']);\r\n        const mockElementChild1 = {\r\n            tagName: '',\r\n            style: {},\r\n            children: []\r\n        };\r\n        const mockElementChild2 = {\r\n            tagName: '',\r\n            style: {},\r\n            children: []\r\n        };\r\n        const mockElement = {\r\n            tagName: '',\r\n            style: {},\r\n            children: [mockElementChild1, mockElementChild2]\r\n        };\r\n        const mockConvertNodeListToArray = (nodeList) => nodeList;\r\n        const mockStyles = {\r\n            'background-color': 'background-color',\r\n            'color': 'color',\r\n            'margin': 'margin',\r\n            'padding': 'padding',\r\n            'dont-care': 'dont-care'\r\n        };\r\n        const expectedCssText = Object.keys(mockStyles)\r\n            .filter(propertyName => propertyName !== 'dont-care')\r\n            .map(propertyName => `${propertyName}:${mockStyles[propertyName]}`)\r\n            .join(';');\r\n\r\n        mockWindow.getComputedStyle.and.returnValue({\r\n            getPropertyValue: (propertyName) => mockStyles[propertyName]\r\n        });\r\n\r\n        it('should add cssText to element', () => {\r\n            inlineElementStyles(mockConvertNodeListToArray, mockWindow, mockElement);\r\n\r\n            expect(mockElement.style.cssText).toEqual(expectedCssText);\r\n            expect(mockElement.children[0].style.cssText).toEqual(expectedCssText);\r\n            expect(mockElement.children[1].style.cssText).toEqual(expectedCssText);\r\n        });\r\n    });\r\n\r\n    describe('getElementClone()', () => {\r\n        it('should call cloneNode on element', () => {\r\n            const mockElement = jasmine.createSpyObj('mockElement', ['cloneNode']);\r\n\r\n            getElementClone(mockElement);\r\n\r\n            expect(mockElement.cloneNode).toHaveBeenCalledWith(true);\r\n        });\r\n    });\r\n});\r\n\r\nconst checkElementStyles = (element, styles) => {\r\n    Object.keys(styles).forEach(propertyName => {\r\n        expect(element.style[propertyName]).toEqual(styles[propertyName]);\r\n    });\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/dom-helpers.test.js","// TESTS\r\nimport './lib/body-inliner.test';\r\nimport './lib/canvas-helpers.test';\r\nimport './lib/dom-helpers.test';\r\n\n\n\n// WEBPACK FOOTER //\n// ./specs.js"],"sourceRoot":""}